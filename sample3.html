
<!DOCTYPE html>
<html dir="ltr" lang="ja">
  <head>
   <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="keywords" content="">
    <meta property="twitter:card" content="summary">
    <meta property="twitter:title" content="">
    <meta property="twitter:image" content="https://public.ynjn.jp/comic/08X10000000027603100/08X10000000027603100_cover_0.jpg" />
    <meta NAME=”ROBOTS” CONTENT=”NOINDEX,NOFOLLOW”>
    <title>Redirect Testing</title>

    <body>
        <input type="hidden" id="comic_id" value="25731">
        <input type="hidden" id="web_url" value="https://devweb.yj-app.xyz">
        <input type="hidden" id="title_name" value="">
        <input type="hidden" id="comic_number" value="246">

        <script>
 
        // アプリを開く。アプリがインストールされていなければサイトを開く。
        function launchApp() {
            var IOS_SCHEME = "jp.co.shueisha.youngjump://open/comic?comic_id=";
            // var IOS_STORE = 'iOSのストアURLをここに入れるべし！';
            var ANDROID_SCHEME = "jp.co.shueisha.youngjump://open/comic?comic_id=";
            // var ANDROID_PACKAGE = 'Androidのパッケージ名をここに入れるべし！';
            var PC_SITE = 'https://www.google.com/';

            var userAgent = navigator.userAgent.toLowerCase();
            // iPhone端末ならアプリを開くかApp Storeを開く。
            if (userAgent.search(/iphone|ipad|ipod/) > -1) {
                try {
                    location.assign = IOS_SCHEME;
                    location.href = IOS_SCHEME;
                } catch (e) {
                    location.href = PC_SITE;
                }
                setTimeout(function() {
                    location.href = PC_SITE;
                }, 500);
            }
            // Android端末ならアプリを開くかGoogle Playを開く。
            else if (userAgent.search(/android/) > -1) {
                // document.location = 'intent://#Intent;scheme=' + ANDROID_SCHEME + ';package=' + ANDROID_PACKAGE + ';end';
                location.href= IOS_SCHEME;
            }
            // その他・不明・PCなどの場合はサイトを開く。
            else {
                document.location = PC_SITE;
            }
        }

        // ページ読み込み時に実行
        window.onload = function() {
            launchApp();
        }

            // var comicId = document.getElementById("comic_id").value;
            // var webUrl = document.getElementById("web_url").value;
            // var titleName = document.getElementById("title_name").value;
            // var comicNumber = document.getElementById("comic_number").value;
            // var event_category = titleName + " " + comicNumber + "巻";

            // var STORE_IOS = "https://apps.apple.com/app/id1351283922?mt=8";
            // var STORE_ANDROID = "https://play.google.com/store/apps/details?id=jp.co.shueisha.youngjump.android";
            // var APP_COMIC_DETAIL = "jp.co.shueisha.youngjump://open/comic?comic_id=";

            // if (comicId > 0) {
            //     APP_COMIC_DETAIL += comicId;
            // }

            // var systemDialogShown = false;
            // var systemDialogDismissed = false;

            // document.addEventListener('visibilitychange', function() {
            //     // アプリやストアに遷移後、自動で画面を戻したり閉じる
            //     if (window.history.length > 1) {
            //         window.history.go(-1);
            //     } else {
            //         window.close();
            //     }
            // });

            // if (navigator.userAgent.indexOf("iPhone") > 0 ||
            //     navigator.userAgent.indexOf("iPad") > 0 ||
            //     navigator.userAgent.indexOf("iPod") > 0) {

            //     function redirect_to_ios_store() {
            //         if (!document.hidden && systemDialogDismissed) {
            //             setTimeout(function() {
            //                 if (!document.hidden) {
            //                     window.location.href = "https://devweb.yj-app.xyz";
            //                 }
            //             }, 200);
            //         }
            //     }

            //     window.addEventListener("blur", function(evt) {
            //         if (systemDialogDismissed) {
            //             systemDialogDismissed = false;
            //        }
            //         systemDialogShown = true;
            //     }, false);

            //     window.addEventListener("focus", function(evt) {
            //         if (systemDialogShown) {
            //             systemDialogDismissed = true;
            //         }
            //         setTimeout(function() {
            //             redirect_to_ios_store();
            //         } , 800);
            //     }, {
            //         once: true
            //     });

            //     try {
            //         window.location.href = APP_COMIC_DETAIL;
            //     } catch (e) {
            //        redirect_to_ios_store();
            //     }
            // }
            // else if (navigator.userAgent.indexOf("Android") > 0) {
            //     location.href= APP_COMIC_DETAIL;
            //     setTimeout(function() {
            //         location.href= STORE_ANDROID;
            //     } , 1000);
            // }
            // else {
            //     location.href = webUrl;
            // }
        </script>
    </body>
  </head>
</html>